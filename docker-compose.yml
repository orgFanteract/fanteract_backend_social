version: "3.8"

services:
  social-app:
    image: fanteract-social-app:latest   # ì‹¤ì œ ë¹Œë“œëœ ì´ë¯¸ì§€ ì´ë¦„
    container_name: fanteract-social-app

    environment:
      # Spring í”„ë¡œí•„
      SPRING_PROFILES_ACTIVE: prod

      # (ì„ íƒ) ì •ë³´ìš© â€“ application.ymlê³¼ë§Œ ë§ì¶°ë‘ë©´ ë¨
      SERVER_PORT: 8080
      SPRING_APPLICATION_NAME: fanteract-social

      # âœ… RDS ì—°ê²° ì •ë³´ (social ì „ìš© RDS + social_db ìŠ¤í‚¤ë§ˆ)
      SPRING_DATASOURCE_URL: jdbc:mysql://fanteract-social-db.c32w6yq24ria.ap-northeast-2.rds.amazonaws.com:3306/social_db?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Seoul&characterEncoding=UTF-8
      SPRING_DATASOURCE_USERNAME: admin      # ğŸ”§ ì‹¤ì œ RDS ìœ ì €ëª…ìœ¼ë¡œ ë³€ê²½
      SPRING_DATASOURCE_PASSWORD: password   # ğŸ”§ ì‹¤ì œ RDS ë¹„ë°€ë²ˆí˜¸ë¡œ ë³€ê²½

      # âœ… JWT
      JWT_SECRET: jwtsecretas78dg97d89we4hahsd89we4hahsd89eqwhu4rtihweur489wtbakjwerbjka2q9it4

      # âœ… account ì„œë¹„ìŠ¤ í˜¸ì¶œìš© ë‚´ë¶€ URL
      ACCOUNT_SERVICE_URL: http://172.31.39.103:8080   # account ì„œë¹„ìŠ¤ EC2ì˜ private IP:PORT

    ports:
      - "8080:8080"

    restart: always